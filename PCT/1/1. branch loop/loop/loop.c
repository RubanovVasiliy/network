/*
 * loop.c:
 *
 */
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#include "hpctimer.h"

enum { n =    64 * 1024 * 1024 };

int main()
{
    int *v, i, sum;
    double t;
    
    if ( (v = malloc(sizeof(*v) * n)) == NULL) {
        fprintf(stderr, "No enough memory\n");
        exit(EXIT_FAILURE);
    }

    for (i = 0; i < n; i++)
        v[i] = 1;
   
    t = hpctimer_wtime();
    int s1 = 0, s2 = 0, s3 = 0, s4 = 0;
    int s5 = 0, s6 = 0, s7 = 0, s8 = 0;
    int s9 = 0, s10 = 0, s11 = 0, s12 = 0;
    int s13 = 0, s14 = 0, s15 = 0, s16 = 0;
    int s17 = 0, s18 = 0, s19 = 0, s20 = 0;
    int s21 = 0, s22 = 0, s23 = 0, s24 = 0;
    int s25 = 0, s26 = 0, s27 = 0, s28 = 0;
    int s29 = 0, s30 = 0, s31 = 0, s32 = 0;
    int s33 = 0, s34 = 0, s35 = 0, s36 = 0;
    int s37 = 0, s38 = 0, s39 = 0, s40 = 0;
    int s41 = 0, s42 = 0, s43 = 0, s44 = 0;
    int s45 = 0, s46 = 0, s47 = 0, s48 = 0;
    int s49 = 0, s50 = 0, s51 = 0, s52 = 0;
    int s53 = 0, s54 = 0, s55 = 0, s56 = 0;
    int s57 = 0, s58 = 0, s59 = 0, s60 = 0;
    int s61 = 0, s62 = 0, s63 = 0, s64 = 0;
    int s65 = 0, s66 = 0, s67 = 0, s68 = 0;
    int s69 = 0, s70 = 0, s71 = 0, s72 = 0;
    int s73 = 0, s74 = 0, s75 = 0, s76 = 0;
    int s77 = 0, s78 = 0, s79 = 0, s80 = 0;
    int s81 = 0, s82 = 0, s83 = 0, s84 = 0;
    int s85 = 0, s86 = 0, s87 = 0, s88 = 0;
    int s89 = 0, s90 = 0, s91 = 0, s92 = 0;
    int s93 = 0, s94 = 0, s95 = 0, s96 = 0;
    int s97 = 0, s98 = 0, s99 = 0, s100 = 0;

    int s101 = 0, s102 = 0, s103 = 0, s104 = 0, s105 = 0, s106 = 0, s107 = 0, s108 = 0, s109 = 0, s110 = 0;
    int s111 = 0, s112 = 0, s113 = 0, s114 = 0, s115 = 0, s116 = 0, s117 = 0, s118 = 0, s119 = 0, s120 = 0;
    int s121 = 0, s122 = 0, s123 = 0, s124 = 0, s125 = 0, s126 = 0, s127 = 0, s128 = 0;



    for (sum = 0, i = 0; i < n; i += 128) {
        s1 += v[i];
        s2 += v[i + 1];
        s3 += v[i + 2];
        s4 += v[i + 3];
        s5 += v[i + 4];
        s6 += v[i + 5];
        s7 += v[i + 6];
        s8 += v[i + 7];
        s9 += v[i + 8];
        s10 += v[i + 9];
        s11 += v[i + 10];
        s12 += v[i + 11];
        s13 += v[i + 12];
        s14 += v[i + 13];
        s15 += v[i + 14];
        s16 += v[i + 15];
        s17 += v[i + 16];
        s18 += v[i + 17];
        s19 += v[i + 18];
        s20 += v[i + 19];
        s21 += v[i + 20];
        s22 += v[i + 21];
        s23 += v[i + 22];
        s24 += v[i + 23];
        s25 += v[i + 24];
        s26 += v[i + 25];
        s27 += v[i + 26];
        s28 += v[i + 27];
        s29 += v[i + 28];
        s30 += v[i + 29];
        s31 += v[i + 30];
        s32 += v[i + 31];
        s33 += v[i + 32];
        s34 += v[i + 33];
        s34 += v[i + 34];
        s36 += v[i + 35];
        s37 += v[i + 36];
        s38 += v[i + 37];
        s39 += v[i + 38];

        s40 += v[i + 39];
        s41 += v[i + 40];
        s42 += v[i + 41];
        s43 += v[i + 42];
        s44 += v[i + 43];
        s45 += v[i + 44];
        s46 += v[i + 45];
        s47 += v[i + 46];
        s48 += v[i + 47];
        s49 += v[i + 48];

        s50 += v[i + 49];
        s51 += v[i + 50];
        s52 += v[i + 51];
        s53 += v[i + 52];
        s54 += v[i + 53];
        s55 += v[i + 54];
        s56 += v[i + 55];
        s57 += v[i + 56];
        s58 += v[i + 57];
        s59 += v[i + 58];
        s60 += v[i + 59];

        s61 += v[i + 60];
        s62 += v[i + 61];
        s63 += v[i + 62];
        s64 += v[i + 63];
        s65 += v[i + 64];
        s66 += v[i + 65];
        s67 += v[i + 66];
        s68 += v[i + 67];
        s69 += v[i + 68];

        s70 += v[i + 69];
        s71 += v[i + 70];
        s72 += v[i + 71];
        s73 += v[i + 72];
        s74 += v[i + 73];
        s75 += v[i + 74];
        s76 += v[i + 75];
        s77 += v[i + 76];
        s78 += v[i + 77];
        s79 += v[i + 78];

        s80 += v[i + 79];
        s81 += v[i + 80];
        s82 += v[i + 81];
        s83 += v[i + 82];
        s84 += v[i + 83];
        s85 += v[i + 84];
        s86 += v[i + 85];
        s87 += v[i + 86];
        s88 += v[i + 87];
        s89 += v[i + 88];

        s90 += v[i + 89];
        s91 += v[i + 90];
        s92 += v[i + 91];
        s93 += v[i + 92];
        s94 += v[i + 93];
        s95 += v[i + 94];
        s96 += v[i + 95];
        s97 += v[i + 96];
        s98 += v[i + 97];
        s99 += v[i + 98];

        s100 += v[i + 99];
        s101 += v[i + 100];
        s102 += v[i + 101];
        s103 += v[i + 102];
        s104 += v[i + 103];
        s105 += v[i + 104];
        s106 += v[i + 105];
        s107 += v[i + 106];
        s108 += v[i + 107];
        s109 += v[i + 108];

        s110 += v[i + 109];
        s111 += v[i + 110];
        s112 += v[i + 111];
        s113 += v[i + 112];
        s114 += v[i + 113];
        s115 += v[i + 114];
        s116 += v[i + 115];
        s117 += v[i + 116];
        s118 += v[i + 117];
        s119 += v[i + 118];

        s120 += v[i + 119];
        s121 += v[i + 120];
        s122 += v[i + 121];
        s123 += v[i + 122];
        s124 += v[i + 123];
        s125 += v[i + 124];
        s126 += v[i + 125];
        s127 += v[i + 126];
        s128 += v[i + 127];


    }
    sum = s1 + s2 + s3 + s4 + s5 + s6 + s7 + s8 + s9 + s10 
    + s11 + s12 + s13 + s14 + s15 + s16 + s17 + s18 + s19 + s20 
    + s21 + s22 + s23 + s24 + s25 + s26 + s27 + s28 + s29 + s30 
    + s31 + s32 + s33 + s34 + s35 + s36 + s37 + s38 + s39 + s40 
    + s41 + s42 + s43 + s44 + s45 + s46 + s47 + s48 + s49 + s50 
    + s51 + s52 + s53 + s54 + s55 + s56 + s57 + s58 + s59 + s60
    + s61 + s62 + s63 + s64 + s65 + s66 + s67 + s68 + s69 + s70 
    + s71 + s72 + s73 + s74 + s75 + s76 + s77 + s78 + s79 + s80 
    + s81 + s82 + s83 + s84 + s85 + s86 + s87 + s88 + s89 + s90
    + s91 + s92 + s93 + s94 + s95 + s96 + s97 + s98 + s99 + s100
    + s101 + s102 + s103 + s104 + s105 + s106 + s107 + s108 + s109 + s110
    + s111 + s112 + s113 + s114 + s115 + s116 + s117 + s118 + s119 + s120
    + s121 + s122 + s123 + s124 + s125 + s126 + s127 + s128;
    

    t = hpctimer_wtime() - t;

    printf("Sum = %d\n", sum);
    printf("Elapsed time (sec.): %.6f\n", t);

    free(v);
    return 0;
}
